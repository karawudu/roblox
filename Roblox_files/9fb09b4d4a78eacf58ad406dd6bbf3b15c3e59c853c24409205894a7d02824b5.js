!function(){"use strict";function c(){return{retryable:!0,withCredentials:!0,url:"".concat(ie,"/v1/email")}}var r={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},d:function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},l=CoreUtilities,D=React,U=r.n(D),i=ReactDOM,j=Roblox,e=r.n(j),t=PropTypes,n=r.n(t),o=ReactUtilities,a="verificationUpsell-container",s={common:[],feature:"Feature.VerificationUpsell"},u="SET_USER_EMAIL_STATES",d="SET_MODAL_STATES",p="SET_PAGENAME_STATE",m="SET_INPUT_STATE",f="SET_ERROR_STATE",v="SET_EMAIL_SENT_STATE",y="SET_RESEND_EMAIL_STATE",h="SET_EMAIL_UPDATING_STATE",b="SET_TRIGGER_ORIGIN",g="SET_INPUT_CLEAR",E="SET_EMAIL_ADDED_STATE",P="Verification",S="UpdateEmail",C="UpdatePassword",x="logout",N="buyRobuxPage",w="homepage",A="premiumSubscriptionPage",O="purchaseWarning",T="https://en.help.roblox.com/hc/articles/115004630823-Roblox-Privacy-and-Cookie-Policy",M="Enter",k="Action.ChangeEmail",R="Action.ResendConfirmationEmail",I="Action.SendConfirmationEmail",_="Action.Logout",L="Action.GenericSkip",H="Action.Continue",B="Action.PrivacyPolicy",V="Description.PleaseEnterEmail",q="Description.PleaseEnterParentEmail",F="Description.AddEmailTextOver13",G="Description.AddEmailTextUnder13",W="Description.LogoutAddEmailTextOver13",Y="Description.LogoutAddEmailTextUnder13",$="Description.VerifyEmailBody",z="Heading.PleaseAddEmail",K="Heading.AddEmail",X="Heading.VerifyEmail",J="Heading.VerifyOnLogout",Q="Label.EmailInputPlaceholderOver13",Z="Label.EmailInputPlaceholderUnder13",ee="Message.ConfirmationEmailNotSent",te="Message.InvalidEmailAddress",ne="Response.ErrorTryAgain",re="Response.TooManyAttemptsTryAgainLater",ie=j.EnvironmentUrls.accountSettingsApi,oe=j.EnvironmentUrls.authApi,ae=j.EnvironmentUrls.apiGatewayUrl,ce=j.EnvironmentUrls.accountInformationApi,le={header:"alt_title",body:"alt_body",primaryButton:"alt_primary_button_text",secondaryButton:"alt_secondary_button_text"};function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function pe(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?de(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):de(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function me(e,t){switch(t.type){case g:return pe(pe({},e),{},{userEmailInput:""});case b:return pe(pe({},e),{},{origin:t.origin,skipCallback:t.skipCallback,closeCallback:t.closeCallback});case u:return pe(pe({},e),{},{isEmailVerified:t.isEmailVerified,userEmail:t.userEmail});case p:return pe(pe({},e),{},{pageName:t.pageName});case f:return pe(pe({},e),{},{errorMsg:t.errorMsg});case h:return pe(pe({},e),{},{isEmailUpdating:t.isEmailUpdating});case v:return pe(pe({},e),{},{isEmailSent:!0});case E:return pe(pe({},e),{},{isEmailAdded:!0});case y:return pe(pe({},e),{},{isEmailSent:!1});case m:return e.pageName===S?pe(pe({},e),{},{userEmailInput:t.value,errorMsg:""}):e;case d:if(e.pageName!==S)return pe(pe({},e),{},{pageName:P,titleText:we,bodyText:Pe,primaryButtonText:ye,secondaryButtonText:he,errorMsg:""});var n,r,i,o=j.CurrentUser&&!j.CurrentUser.isUnder13,a=ve,c="";switch(e.skipCallback&&(c=ge),e.origin){case x:r=Te,i=o?xe:Ne,c=be,t.experimentParameters&&(r=null!==(n=t.experimentParameters[le.header])&&void 0!==n?n:r,i=null!==(n=t.experimentParameters[le.body])&&void 0!==n?n:i,a=null!==(n=t.experimentParameters[le.primaryButton])&&void 0!==n?n:a,c=null!==(n=t.experimentParameters[le.secondaryButton])&&void 0!==n?n:c);break;case w:r=Oe,i=o?Re:Ie,a=Ee;break;default:r=Ae,i=o?Se:Ce}return pe(pe({},e),{},{pageName:S,titleText:r,bodyText:i,primaryButtonText:a,secondaryButtonText:c,errorMsg:"",userEmailInputPlaceholder:o?Me:ke});default:return e}}function fe(e){var t=e.children,e=(n=se((0,D.useReducer)(me,De),2))[0],n=n[1];return U().createElement(Ue.Provider,{value:{emailUpsellState:e,dispatch:n}},t)}var ve=I,ye=R,he=k,be=_,ge=L,Ee=H,Pe=$,Se=F,Ce=G,xe=W,Ne=Y,we=X,Ae=K,Oe=z,Te=J,Me=Q,ke=Z,Re=V,Ie=q,De={pageName:"",isModalOpen:!1,isEmailVerified:!1,isEmailSent:!1,isEmailUpdating:!1,isEmailAdded:!1,origin:"",experimentParameters:null,userEmail:"",userEmailInput:"",userEmailInputPlaceholder:Me,errorMsg:"",titleText:we,bodyText:Pe,primaryButtonText:ye,secondaryButtonText:he,skipCallback:null,closeCallback:null},Ue=(0,D.createContext)(De);function je(){return(0,D.useContext)(Ue)}fe.propTypes={children:n().node.isRequired};var _e=ReactStyleGuide,Le=HeaderScripts,He=(!!j.DeviceMeta&&(0,j.DeviceMeta)()).isAndroidApp;function Be(e){var t=e.show,n=e.onHide,r=e.onPrimaryAction,i=e.onSecondaryAction,o=e.onInputChange,a=e.onBackAction,c=e.onInputFocus,l=e.onKeyDown,s=e.translate,u=je().emailUpsellState,d=u.pageName,p=u.titleText,m=u.bodyText,f=u.primaryButtonText,v=u.secondaryButtonText,y=u.userEmailInput,h=u.userEmailInputPlaceholder,b=u.userEmail,g=u.errorMsg,E=u.isEmailSent,e=u.isEmailUpdating,u=null===Le.authenticatedUser||void 0===Le.authenticatedUser?void 0:Le.authenticatedUser.isUnder13;return U().createElement(_e.Modal,{show:t,onHide:n,className:"".concat(He?"verification-android-modal":""," verification-modal"),size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},U().createElement(_e.Modal.Header,{useBaseBootstrapComponent:!0},U().createElement("div",{className:"verification-upsell-title-container"},d===C?U().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:a},U().createElement("span",{className:"icon-back"})):U().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:n},U().createElement("span",{className:"close icon-close"})),U().createElement(_e.Modal.Title,{id:"contained-modal-title-vcenter"},s(p)))),U().createElement(_e.Modal.Body,null,U().createElement("div",{className:"email-verification-upsell-image"}),U().createElement("p",{className:"verification-upsell-text-body"},s(m,{emailAddress:b})),d===S&&U().createElement("input",{type:"email",autoFocus:!0,className:"".concat(g?"input-field-error":""," form-control input-field verification-upsell-modal-input"),placeholder:s(h),autoComplete:"email",value:y,onChange:function(e){return o(e.target.value)},onFocus:function(){return c()},onKeyDown:function(e){return l(e.key)}}),g&&U().createElement("p",{className:"text-error modal-error-message sms-code-error"},s(g)),d===S&&u&&U().createElement("div",{className:"privacy-policy-button"},U().createElement("a",{href:T,target:"_blank",rel:"noreferrer"},s(B)))),U().createElement(_e.Modal.Footer,null,U().createElement("div",{className:"verification-upsell-footer-container"},d!==P&&U().createElement(_e.Button,{className:"modal-button verification-upsell-btn",variant:_e.Button.variants.cta,size:_e.Button.sizes.medium,isDisabled:e,onClick:r},s(f)),d===P&&U().createElement("button",{type:"button",className:"".concat(E?"resend-button-disabled":""," resend-verification-email-button"),disabled:E||g,onClick:r},s(f)),v&&U().createElement("button",{type:"button",className:"change-email-button",onClick:i},s(v)))))}function Ve(e){var t=null==e||null===(t=e.data)||void 0===t?void 0:t.errors;return t&&t[0]&&t[0].code}Be.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired,show:n().bool.isRequired,onPrimaryAction:n().func.isRequired,onSecondaryAction:n().func.isRequired,onInputChange:n().func.isRequired,onKeyDown:n().func.isRequired,onBackAction:n().func.isRequired,onInputFocus:n().func.isRequired};var qe=Be,Fe="addEmail",Ge="verifyEmail",We="addPhone",Ye="verifyPhone",$e="phoneAdded",ze="discoverabilityConsent",Ke="unset",Xe="homepage";function Je(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Qe(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){Je(r,t,n,i,o,"next",e)}function o(e){Je(r,t,n,i,o,"throw",e)}i(void 0)})}}function Ze(){var e={retryable:!0,withCredentials:!0,url:"".concat(ie,"/v1/email/verify")};return l.httpService.post(e).then(function(){return!0},Ve)}function et(n){var e=c();return l.httpService.get(e).then(function(e){var t=e.data;return null!=t&&t.emailAddress&&(!n.requireVerification||t.verified)||(e=new CustomEvent("OpenVerificationModal",{detail:{isEmailVerified:t.verified,email:null==t?void 0:t.emailAddress,skipCallback:n.skipCallback,origin:n.origin,experimentParameters:null==n?void 0:n.experimentParameters,requireVerification:n.requireVerification,closeCallback:n.closeCallback}}),window.dispatchEvent(e)),t},function(e){return console.log(e),!1})}function tt(e){return et({origin:w,closeCallback:e})}function nt(e){switch(e){case P:return Ge;case S:return Fe;default:return""}}var rt=function(){var e=Qe(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={retryable:!0,withCredentials:!0,url:"".concat(oe,"/v2/metadata")},e.abrupt("return",l.httpService.get(t));case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Qe(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={retryable:!0,withCredentials:!0,url:"".concat(ae,"/product-experimentation-platform/v1/projects/1/layers/Website.Logout.ContactMethodModal/values")},n={parameters:Object.values(le).join(",")},e.abrupt("return",l.httpService.get(t,n));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Qe(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:if(n=e.sent,null!==(n=n.data)&&void 0!==n&&n.IsEmailUpsellAtLogoutEnabled){e.next=5;break}return e.abrupt("return",!1);case 5:return r={},e.prev=6,e.next=9,it();case 9:r=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:return e.abrupt("return",et({origin:x,experimentParameters:null===(n=r)||void 0===n?void 0:n.data,skipCallback:t}));case 16:case"end":return e.stop()}},e,null,[[6,12]])}));return function(){return e.apply(this,arguments)}}(),at=te,ct=re,lt=ne,st=t=9,ut=6,dt=CoreRobloxUtilities;function pt(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function mt(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):pt(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function ft(e,t){dt.eventStreamService.sendEventWithTarget(e.type,e.context,mt(mt({},e.params),{},{origin:t.origin,section:t.section}))}function vt(e,t){return(e=mt({},e)).params=mt(mt({},e.params),{},{errorCode:t}),e}var I=dt.eventStreamService.eventTypes,R="verificationUpsell",yt={showModal:{name:"showModal",type:I.modalAction,context:R,params:{aType:"shown"}},dismissModal:{name:"dismissModal",type:I.modalAction,context:R,params:{aType:"dismissed"}},touchEmail:{name:"touchEmail",type:I.formInteraction,context:R,params:{aType:"focus",field:"email"}},showError:{name:"showError",type:I.formInteraction,context:R,params:{aType:"shown",field:"errorMessage"}},clickContinue:{name:"clickContinue",type:I.formInteraction,context:R,params:{btn:"continue"}},clickSendConfirmationEmail:{name:"clickSendConfirmationEmail",type:I.formInteraction,context:R,params:{aType:"click",btn:"sendConfirmation"}},clickResendConfirmationEmail:{name:"clickResendConfirmationEmail",type:I.formInteraction,context:R,params:{aType:"click",btn:"resendConfirmation"}},clickChangeEmail:{name:"clickChangeEmail",type:I.formInteraction,context:R,params:{aType:"click",btn:"changeEmail"}},skipLogoutAnyway:{name:"skipLogoutAnyway",type:I.formInteraction,context:R,params:{aType:"click",btn:"skipLogoutAnyway"}},skipPrepurchaseVerification:{name:"skipPrepurchaseVerification",type:I.formInteraction,context:R,params:{aType:"click",btn:"skipPrepurchaseVerification"}}};function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gt=ee,Et=te,Pt=t;function St(e){var t=e.translate,n=ht((0,D.useState)(!1),2),e=n[0],r=n[1],n=je(),i=n.emailUpsellState,o=n.dispatch;function a(){var e,t,r=nt(i.pageName);switch(i.pageName){case P:ft(yt.clickResendConfirmationEmail,{origin:i.origin,section:r}),Ze().then(function(e){!0!==e?(o({type:f,errorMsg:gt}),e=vt(yt.showError,e),ft(e,{origin:i.origin,section:r})):(o({type:v}),setTimeout(function(){o({type:y})},15e3))});break;case S:ft(yt.clickContinue,{origin:i.origin,section:r}),t=i.userEmailInput,/\S+@\S+\.\S+/.test(t)?(ft(yt.clickSendConfirmationEmail,{origin:i.origin,section:r}),o({type:h,isEmailUpdating:!0}),e={emailAddress:i.userEmailInput},t=c(),l.httpService.post(t,e).then(function(){return!0},Ve).then(function(e){var t,n;!0!==e?(n=function(e){switch(e){case ut:return ct;case st:return at;default:return lt}}(e),t=vt(yt.showError,e),ft(t,{origin:i.origin,section:r}),o({type:f,errorMsg:n}),o({type:h,isEmailUpdating:!1})):(o({type:u,isEmailVerified:!1,userEmail:(e=i.userEmailInput,t=e.indexOf("@"),n=e.substring(0,1),"".concat(n,"*****").concat(e.substring(t)))}),o({type:g}),o({type:p,pageName:P}),o({type:d}),o({type:h,isEmailUpdating:!1}),o({type:E}))}),o({type:d})):(e=vt(yt.showError,Pt),ft(e,{origin:i.origin,section:r}),o({type:f,errorMsg:Et}))}}return(0,D.useEffect)(function(){i.pageName&&ft(yt.showModal,{origin:i.origin,section:nt(i.pageName)})},[i.pageName]),(0,D.useEffect)(function(){window.addEventListener("OpenVerificationModal",function(e){r(!0),o({type:b,origin:e.detail.origin,skipCallback:e.detail.skipCallback,closeCallback:e.detail.closeCallback}),o({type:u,isEmailVerified:e.detail.isEmailVerified,userEmail:e.detail.email});var t=e.detail.requireVerification&&e.detail.email?P:S;o({type:p,pageName:t}),o({type:d,experimentParameters:null===(e=e.detail)||void 0===e?void 0:e.experimentParameters})},!1)},[]),U().createElement("div",null,U().createElement(qe,{show:e,onHide:function(){return ft(yt.dismissModal,{origin:i.origin,section:nt(i.pageName)}),o({type:g}),i.closeCallback&&i.closeCallback(i.isEmailAdded),void r(!1)},onPrimaryAction:a,onSecondaryAction:function(){var e=nt(i.pageName);switch(i.pageName){case P:ft(yt.clickChangeEmail,{origin:i.origin,section:e}),o({type:p,pageName:S}),o({type:d});break;case S:i.skipCallback&&(ft(i.origin===x?yt.skipLogoutAnyway:yt.skipPrepurchaseVerification,{origin:i.origin,section:e}),i.skipCallback()),o({type:g}),r(!1)}},onInputFocus:function(){ft(yt.touchEmail,{origin:i.origin,section:nt(i.pageName)})},onInputChange:function(e){o({type:m,pageName:S,value:e})},onKeyDown:function(e){return e===M&&a()},onBackAction:function(){return o({type:p,pageName:S}),void o({type:d})},translate:t}))}St.propTypes={translate:n().func.isRequired};var Ct=St;function xt(e){e=e.translate;return U().createElement(fe,null,U().createElement(Ct,{translate:e}))}xt.propTypes={translate:n().func.isRequired};var Nt=(0,o.withTranslations)(xt,s),wt="CLOSE_PHONE_NUMBER_MODAL",At="SET_ERROR_MESSAGE",Ot="SET_PHONE_NUMBER",Tt="SET_COUNTRY",Mt="SET_PAGE",kt="SET_PHONE_VERIFICATION_STATUS",Rt="SET_PREFIX_OPTIONS_LIST",It="SET_LOGGING_VALUES",Dt="SET_DISCOVERABILITY_CONSENT_PREFILL",Ut="Action.Done",jt="Action.Continue",k="Action.AddPhoneNumber",_t="Action.ChangePhoneNumber",Lt="Action.ResendCode",Ht="Action.CodeResent",Bt="Heading.VerifyYourPhone",Vt="Label.EnterCode",qt="Label.PhoneNumber",Ft="Heading.VerificationCode",_="Message.InvalidSmsCode",L="Description.VerificationCodeSmsFeesMayApply",H="Description.PhoneNumberNeverPublic",$="Description.ShortCodeLegalDisclaimer",Gt="Heading.PhoneIsVerified",Wt="Description.PhoneForRecovery",F="Response.PhoneNumberAlreadyLinked",G="Response.TooManyVerificationAttempts",W="Response.PhoneHasTooManyAssociatedAccounts",Y="Response.ErrorPhoneFormatInvalid",X="Response.InvalidPhoneNumberError",K="Response.ErrorTryAgain",z='<a href="https://en.help.roblox.com/hc/articles/9483830673556-Roblox-SMS-Terms-of-Service">',J='<a href="https://en.help.roblox.com/hc/articles/115004630823">',Q="</a>",Yt="Action.Done",$t="Action.LearnMore",zt="Description.CanUsePhoneForRecovery",Kt="Description.PhoneDiscoverabilityPrivacy",Xt="Description.WantToBeRecommendedViaPhone",Jt="Header.LetFriendsFindYou",Qt="Header.PhoneIsVerified",Zt="Label.No",en="Label.Yes",tn="Response.ErrorTryAgain",nn="Heading.VerificationRequired",rn="Heading.DontGetLockedOut",on="Label.RecoverIfPasswordLost",an="Heading.ImproveAccountSecurity",cn="Label.KeepBadActorsOut",ln="Action.AddPhoneNumber",sn="Action.AddEmailAddress",un="Action.LogOutText",dn="Action.Support",Z="US",pn=function(e){return"+".concat(e)},mn=function(e,t){return"".concat(e," +(").concat(t,")")},fn=function(e,t){return"\n+".concat(e).concat(t)},vn="Enter",yn=" (",hn=")",bn=6,gn=10,En="US",V=2,q=3,re=6,ne=8,I=9,R=7,ee=6,Pn="upsell-phone-number-number",Sn="verification-code-input",Cn="ADD_PHONE_NUMBER_PAGE",xn="VERIFY_PHONE_NUMBER_PAGE",Nn="ADD_PHONE_SUCCESS_PAGE",wn="PHONE_DISCOVERABILITY_CONSENT_PAGE",te=dt.eventStreamService.eventTypes,t="verificationUpsell",An={phoneNumberModalDismissed:{name:"phoneNumberModalDismissed",type:te.modalAction,context:t,params:{aType:"dismissed"}},phoneNumberModalShown:{name:"phoneNumberModalShown",type:te.modalAction,context:t,params:{aType:"shown"}},phoneNumberModalErrorShown:{name:"phoneNumberModalErrorShown",type:te.modalAction,context:t,params:{aType:"shown",field:"errorMessage"}},addPhonePrefixPressed:{name:"addPhonePrefixPressed",type:te.formInteraction,context:t,params:{aType:"focus",field:"countryPrefix"}},addPhonePhoneNumberPressed:{name:"addPhonePhoneNumberPressed",type:te.formInteraction,context:t,params:{aType:"focus",field:"phoneNumber"}},addPhoneContinuePressed:{name:"addPhoneContinuePressed",type:te.formInteraction,context:t,params:{btn:"continue"}},verifyPhoneChangePhoneNumberPressed:{name:"verifyPhoneChangePhoneNumberPressed",type:te.formInteraction,context:t,params:{btn:"changePhoneNumber"}},verifyPhoneCodeFieldPressed:{name:"verifyPhoneCodeFieldPressed",type:te.formInteraction,context:t,params:{aType:"focus",field:"verificationCode"}},verifyPhoneContinuePressed:{name:"verifyPhoneContinuePressed",type:te.formInteraction,context:t,params:{btn:"continue"}},verifyPhoneResendPressed:{name:"verifyPhoneResendPressed",type:te.formInteraction,context:t,params:{btn:"resendCode"}},phoneAddedDonePressed:{name:"phoneAddedDonePressed",type:te.formInteraction,context:t,params:{btn:"done"}}};function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function kn(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Mn(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Mn(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function Rn(e,t){var n;switch(t.type){case Ot:return kn(kn({},e),{},{phone:t.phone,errorMessage:""});case Tt:return kn(kn({},e),{},{phonePrefixPickerIndex:t.phonePrefixPickerIndex,errorMessage:""});case At:return kn(kn({},e),{},{errorMessage:t.errorMessage});case Mt:return kn(kn({},e),{},{errorMessage:"",pageName:t.pageName});case kt:return kn(kn({},e),{},{isPhoneVerified:t.isPhoneVerified});case Dt:return kn(kn({},e),{},{shouldPrefillAffirmativeDiscoverabilityConsent:null!==(n=null==t?void 0:t.shouldPrefillAffirmativeDiscoverabilityConsent)&&void 0!==n&&n});case Rt:return kn(kn({},e),{},{phonePrefixOptionsList:t.phonePrefixOptionsList});case It:return kn(kn({},e),{},{origin:t.origin});case wt:return kn(kn({},Dn),{},{isOpen:!1,errorMessage:""});default:return Dn}}function In(e){var t=e.children,e=(n=On((0,D.useReducer)(Rn,Dn),2))[0],n=n[1];return U().createElement(Un.Provider,{value:{phoneUpsellState:e,dispatch:n}},t)}var Dn={isOpen:!0,pageName:Cn,errorMessage:"",origin:Ke,phone:"",isPhoneVerified:!1,phonePrefixPickerIndex:0,phonePrefixOptionsList:[],shouldDiscoverabilityConsentDefaultYes:!1},Un=(0,D.createContext)(Dn);function jn(){return(0,D.useContext)(Un)}function _n(){var e={retryable:!0,withCredentials:!0,url:"".concat(ae,"/phone-number-api/v1/phone-prefix-list")};return l.httpService.get(e).then(function(e){var t,n=e.data,e=n.find(function(e){return!0===e.isDefault}),r=null!==(e=null==e?void 0:e.code)&&void 0!==e?e:qn;return n.filter(function(e){return e.code!==r||(t=e,!1)}),t&&n.unshift(t),n},function(e){return!1})}function Ln(e){var t=e.phone,n=e.prefix,r=e.countryCode,e={retryable:!0,withCredentials:!0,url:"".concat(ce,"/v1/phone")},t={countryCode:r,prefix:n,phone:t};return l.httpService.post(e,t)}function Hn(e){var t={code:0<arguments.length&&void 0!==e?e:""},e={retryable:!0,withCredentials:!0,url:"".concat(ce,"/v1/phone/verify")};return l.httpService.post(e,t)}function Bn(e){var t={retryable:!0,withCredentials:!0,url:"".concat(ce,"/v1/phone/resend")},e=(e=e)||{};return l.httpService.post(t,e).then(function(e){e.data;return!0},function(e){return!1})}function Vn(e){switch(e){case Cn:return We;case xn:return Ye;case Nn:return $e;case wn:return ze;default:return""}}In.propTypes={children:n().node.isRequired};var qn=Z,Fn=F,Gn=G,Wn=Y,Yn=X,$n=K,zn=W,Kn=_,Xn=q,Jn=re,Qn=I,Zn=V,er=ne,tr=R,nr=ee;function rr(e){var t=e.translate,e=jn().phoneUpsellState;return U().createElement("p",{className:"input-field-error-text sms-code-error text-error modal-error-message"},e.errorMessage?t(e.errorMessage):null)}rr.propTypes={translate:n().func.isRequired};var ir=rr;function or(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function ar(e){var t=e.translate,n=jn(),r=n.phoneUpsellState,i=n.dispatch,o=pn,a=mn,c=r.phone,e=r.phonePrefixPickerIndex,l=r.phonePrefixOptionsList,n=r.pageName,s=r.origin,r=Pn,u=Vn(n);(0,D.useEffect)(function(){function e(){var c;return c=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===(t=l).length)return e.next=4,_n();e.next=6;break;case 4:t=e.sent,i({type:Rt,phonePrefixOptionsList:t});case 6:case"end":return e.stop()}},e)}),(e=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){or(r,t,n,i,o,"next",e)}function o(e){or(r,t,n,i,o,"throw",e)}i(void 0)})}).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var d=null!==(d=null==l||null===(d=l[e])||void 0===d?void 0:d.prefix)&&void 0!==d?d:"";return U().createElement("div",null,U().createElement("label",{htmlFor:r},U().createElement("p",{className:"verification-code-label font-caption-header text-primary"},t(qt))),U().createElement("div",{id:"upsell-phone",className:"phone-number-input-container input-field form-control"},U().createElement("div",{id:"upsell-phonenumber",className:"phone-input-row"},U().createElement("span",{className:"phone-prefix-wrapper"},U().createElement("div",{className:"phone-prefix-selected text"},o(d)),U().createElement("select",{className:"phone-prefix-dropdown input-field rbx-select",onChange:function(e){e=e.target.value;i({type:Tt,phonePrefixPickerIndex:e})},onFocus:function(){ft(An.addPhonePrefixPressed,{origin:s,section:u})},value:e},l.map(function(e,t){return U().createElement("option",{className:"prefix-option",value:t},a(e.localizedName,e.prefix))}))),U().createElement("div",{id:"upsell-phonenumber-divider",className:"phone-divider"}),U().createElement("input",{id:r,type:"tel",value:c,className:"phone-input form-control",placeholder:t(qt),autoComplete:"tel-national",onChange:function(e){return i({type:Ot,phone:e.target.value})},onFocus:function(){ft(An.addPhonePhoneNumberPressed,{origin:s,section:u})}}))))}ar.propTypes={translate:n().func.isRequired};var cr=ar;function lr(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dr=k,pr=jt,mr=L,fr=H,vr=$,yr=Q,hr=J,br=z,gr=(!!j.DeviceMeta&&(0,j.DeviceMeta)()).isInApp;function Er(e){var t=e.translate,n=e.onHide,r=jn(),i=r.phoneUpsellState,o=r.dispatch,a=i.phone,l=i.phonePrefixPickerIndex,s=i.phonePrefixOptionsList,c=i.pageName,u=i.origin,e=sr((0,D.useState)(!1),2),r=e[0],d=e[1],i=sr((0,D.useState)(!1),2),e=i[0],p=i[1],m=Vn(c);(0,D.useEffect)(function(){var e=null==s||null===(e=s[l])||void 0===e?void 0:e.code;p(e!==En)},[s,l]);var c=t(vr,{linkTagWithSmsTos:br,linkTagWithPrivacyPolicy:hr,linkTagEnd:yr}),f=function(){var c,e=(c=regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),n=s[l],t=n.prefix,n=n.code,ft(An.addPhoneContinuePressed,{origin:u,section:m}),e.next=5,Ln({phone:a,prefix:t,countryCode:n}).then(function(){o({type:Mt,pageName:xn})}).catch(function(e){var t=Ve(e),e=vt(An.phoneNumberModalErrorShown,t);ft(e,{origin:u,section:m}),o({type:At,errorMessage:function(e){switch(e){case Xn:return Fn;case Jn:return Gn;case Zn:return Wn;case er:return Yn;case Qn:return zn;default:return $n}}(t)})}).finally(function(){d(!1)});case 5:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){lr(r,t,n,i,o,"next",e)}function o(e){lr(r,t,n,i,o,"throw",e)}i(void 0)})});return function(){return e.apply(this,arguments)}}();return U().createElement("div",null,U().createElement(_e.Modal.Header,{useBaseBootstrapComponent:!0},U().createElement("div",{className:"verification-upsell-title-container"},U().createElement("button",{type:"button",hidden:gr,className:"verification-upsell-title-button",onClick:n},U().createElement("span",{className:"close icon-close"})),U().createElement(_e.Modal.Title,{id:"contained-modal-title-vcenter"},t(dr)))),U().createElement(_e.Modal.Body,null,U().createElement("div",{className:"phone-number-submission-container"},U().createElement("div",{className:"verification-upsell-text-body text-description"},t(mr)),U().createElement(cr,{translate:t}),U().createElement("div",{className:"phone-verification-nonpublic-text text-description font-caption-body"},t(fr)),U().createElement(ir,{translate:t}))),U().createElement(_e.Modal.Footer,null,U().createElement("div",{className:"text-description font-caption-body phone-verification-legal-text",hidden:e,dangerouslySetInnerHTML:{__html:c}}),U().createElement("div",{className:"buttons-section"},U().createElement(_e.Button,{type:"button",id:"add-phone-number-continue-button",className:"accept-btn",variant:_e.Button.variants.primary,isDisabled:r||0===a.length,onClick:function(){return f()}},t(pr)))))}Er.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired};var Pr=Er,Sr="CloseContactMethodUpsellWebview",Cr="CompletedContactMethodUpsellWebview";function xr(e){var t=e.translate,n=jn(),r=n.phoneUpsellState,i=n.dispatch,o=Sr,a=r.origin,c=r.pageName,e=Gt,n=Wt,r=Ut,l=(!!j.DeviceMeta&&(0,j.DeviceMeta)()).isInApp,s=Vn(c);return U().createElement("div",null,U().createElement(_e.Modal.Body,null,U().createElement("div",{className:"phone-number-verification-upsell-image"}),U().createElement("div",{className:"verification-upsell-title-container phone-number-verification-success-page-title page-title"},U().createElement(_e.Modal.Title,{id:"contained-modal-title-vcenter"},t(e))),U().createElement("div",{className:"phone-number-verification-text-body text-description"},t(n))),U().createElement(_e.Modal.Footer,null,U().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",onClick:function(){ft(An.phoneAddedDonePressed,{origin:a,section:s}),l&&j.Hybrid&&j.Hybrid.Navigation?j.Hybrid.Navigation.navigateToFeature({feature:o}):i({type:wt})}},t(r))))}function Nr(){var e={retryable:!0,withCredentials:!0,url:"".concat(ae,"/user-settings-api/v1/user-settings/metadata")};return l.httpService.get(e).then(function(e){return e.data},function(e){return null})}function wr(e){var t={retryable:!0,withCredentials:!0,url:"".concat(ae,"/user-settings-api/v1/user-settings")},e={phoneNumberDiscoverability:e};return l.httpService.post(t,e).then(function(e){return!0}).catch(function(){return!1})}xr.propTypes={translate:n().func.isRequired};var Ar=xr,Or="Unset",Tr="NotDiscoverable",Mr="Discoverable",kr="discoverabilityPageLoad",Rr="discoverabilityPageClick",Ir="discoverabilityPageRadioButtonClick";function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jr(e){var t=e.translate,n=e.shouldPrefillAffirmativeDiscoverabilityConsent,r=e.origin,i=jn().dispatch,o=Sr,a=Yt,c=$t,l=zt,s=Kt,u=Xt,d=Jt,p=Qt,m=Zt,f=en,v=tn,y=kr,h=Rr,b=Ir,g=(!!j.DeviceMeta&&(0,j.DeviceMeta)()).isInApp,E=Dr((0,D.useState)(n?Mr:Or),2),P=E[0],S=E[1],e=Dr((0,D.useState)(!1),2),E=e[0],C=e[1],e=function(e){S(e.currentTarget.value),dt.eventStreamService.sendEventWithTarget(b,e.currentTarget.value,{origin:r})};return(0,D.useEffect)(function(){dt.eventStreamService.sendEventWithTarget(y,"phoneVerificationUpsell",{version:n?"non_eu_version":"eu_version",origin:r})},[]),U().createElement("div",{className:"phone-discoverability-consent"},U().createElement(_e.Modal.Body,{className:"verification-grid"},U().createElement("span",{className:"icon-spot-success-xl verification-grid-icon"}),U().createElement("div",{className:"discoverability-text-section"},U().createElement("div",{className:"verification-upsell-title-container page-title "},U().createElement(_e.Modal.Title,null,t(p))),U().createElement("div",{className:"text-description"},t(l))),U().createElement("span",{className:"icon-spot-find-friends-xl verification-grid-icon"}),U().createElement("div",{className:"discoverability-text-section"},U().createElement("div",{className:"verification-upsell-title-container page-title"},U().createElement(_e.Modal.Title,null,t(d))),U().createElement("div",{className:"text-description"},t(u))),U().createElement("div",{className:"verification-grid-icon"}),U().createElement("div",{className:"discoverability-radio-button-section"},U().createElement("div",{className:"radio discoverability-consent-option"},U().createElement("input",{type:"radio",name:"discoverability-options",id:"consent-radio-button",value:Mr,checked:P===Mr,onClick:e}),U().createElement("label",{className:"text-description",htmlFor:"consent-radio-button"},t(f))),U().createElement("div",{className:"radio discoverability-consent-option"},U().createElement("input",{type:"radio",name:"discoverability-options",id:"no-consent-radio-button",value:Tr,checked:P===Tr,onClick:e}),U().createElement("label",{className:"text-description",htmlFor:"no-consent-radio-button"},t(m)))),U().createElement("div",{className:"verification-grid-icon"}),U().createElement("div",null,U().createElement("div",{className:"text-secondary"},t(s)),U().createElement("a",{className:"text-secondary text-link learn-more-link",target:"_blank",rel:"noreferrer",href:"https://en.help.roblox.com/hc/articles/7416652004884"},t(c)))),U().createElement(_e.Modal.Footer,null,U().createElement(ir,{translate:t}),U().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",disabled:E,onClick:function(){C(!0),dt.eventStreamService.sendEventWithTarget(h,P,{origin:r}),wr(P).then(function(e){return!0!==e?(C(!1),void i({type:At,errorMessage:v})):(i({type:At,errorMessage:""}),void(g&&j.Hybrid&&j.Hybrid.Navigation?j.Hybrid.Navigation.navigateToFeature({feature:o}):i({type:wt})))})}},t(a))))}jr.propTypes={origin:n().string.isRequired,translate:n().func.isRequired,shouldPrefillAffirmativeDiscoverabilityConsent:n().bool.isRequired};var _r=jr;function Lr(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Hr(e){return e.replace(/[^0-9]/g,"").substring(0,Vr)}var Br=function(){var c,e=(c=regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(t=Nn),e.next=4,Nr();case 4:return!0===(null==(r=e.sent)?void 0:r.isDiscoverabilitySettingsEnabled)&&!0===(null==r?void 0:r.showDiscoverabilityUpsells)&&(t=wn,n=!0===(null==r?void 0:r.prefillDiscoverabilitySetting)),e.abrupt("return",{successPage:t,shouldPrefillAffirmativeDiscoverabilityConsent:n});case 7:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){Lr(r,t,n,i,o,"next",e)}function o(e){Lr(r,t,n,i,o,"throw",e)}i(void 0)})});return function(){return e.apply(this,arguments)}}(),Vr=bn;function qr(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Fr(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qr(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):qr(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function Gr(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Wr(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){Gr(r,t,n,i,o,"next",e)}function o(e){Gr(r,t,n,i,o,"throw",e)}i(void 0)})}}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e){var t=e.translate,n=e.onHide,r=jn(),i=r.phoneUpsellState,o=r.dispatch,a=i.phone,c=i.phonePrefixOptionsList,l=i.phonePrefixPickerIndex,s=i.pageName,u=i.origin,d=Cr,p=Yr((0,D.useState)({code:"",isReadyToSubmitCode:""}),2),m=p[0],f=p[1],v=(!!j.DeviceMeta&&(0,j.DeviceMeta)()).isInApp,y=v,h=Vn(s),b=Yr((0,D.useState)(0),2),g=b[0],E=b[1],P=Yr((0,D.useState)(!1),2),S=P[0],C=P[1],x=Yr((0,D.useState)(Nn),2),N=x[0],w=x[1],A=Bt,O=_t,T=jt,e=Lt,r=Ht,p=Vt,s=Ft,b=Sn,M=vn,k=bn,P=yn,x=hn,R=gn,a=fn(c[l].prefix,a);function I(){return(I=Wr(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ft(An.verifyPhoneContinuePressed,{origin:u,section:h}),m.code.length!==k)return e.abrupt("return");e.next=3;break;case 3:return C(!0),o({type:At,errorMessage:""}),e.prev=5,e.next=8,Hn(m.code);case 8:o({type:kt,isPhoneVerified:!0}),o({type:Mt,pageName:N}),v&&j.Hybrid&&j.Hybrid.Navigation&&j.Hybrid.Navigation.navigateToFeature({feature:d}),e.next=20;break;case 13:e.prev=13,e.t0=e.catch(5),n=Ve(e.t0),t=function(e){switch(e){case nr:return Gn;case tr:return Kn;default:return $n}}(n),n=vt(An.phoneNumberModalErrorShown,n),ft(n,{origin:u,section:h}),o({type:At,errorMessage:t});case 20:return e.prev=20,f(Fr(Fr({},m),{},{isReadyToSubmitCode:!1})),C(!1),e.finish(20);case 24:case"end":return e.stop()}},e,null,[[5,13,20,24]])}))).apply(this,arguments)}return(0,D.useEffect)(function(){function e(){return(e=Wr(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br();case 2:n=e.sent,t=n.successPage,n=n.shouldPrefillAffirmativeDiscoverabilityConsent,o({type:Dt,shouldPrefillAffirmativeDiscoverabilityConsent:n}),w(t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),(0,D.useEffect)(function(){m.isReadyToSubmitCode&&function(){I.apply(this,arguments)}()},[m]),U().createElement("div",null,U().createElement(_e.Modal.Header,{useBaseBootstrapComponent:!0},U().createElement("div",{className:"verification-upsell-title-container"},U().createElement("button",{type:"button",className:"verification-upsell-title-button",hidden:y,onClick:n},U().createElement("span",{className:"close icon-close"})),U().createElement(_e.Modal.Title,{id:"contained-modal-title-vcenter"},t(A)))),U().createElement(_e.Modal.Body,null,U().createElement("div",{className:"phone-number-verification-upsell-image"}),U().createElement("div",{className:"verification-upsell-text-body text-description"},t(p,{phoneNumber:a})),U().createElement("button",{type:"button",className:"phone-number-change-number-button phone-number-text-button",onClick:function(){ft(An.verifyPhoneChangePhoneNumberPressed,{origin:u,section:h}),o({type:Mt,pageName:Cn})}},t(O)),U().createElement("label",{htmlFor:b},U().createElement("p",{className:"verification-code-label font-caption-header text-primary"},t(s))),U().createElement("input",{id:b,type:"text",inputMode:"numeric",className:"".concat(i.errorMessage?"input-field-error":""," form-control input-field input-number verification-code-input"),onChange:function(e){return e=e.target.value,o({type:At,errorMessage:""}),void f(Fr(Fr({},m),{},{code:Hr(e)}))},onPaste:function(e){e=(e.clipboardData||window.clipboardData).getData("text"),e=Hr(e),f({code:e,isReadyToSubmitCode:!0})},autoComplete:"one-time-code",placeholder:"000000",onKeyDown:function(e){e.key===M&&f(Fr(Fr({},m),{},{isReadyToSubmitCode:!0}))},onFocus:function(){ft(An.verifyPhoneCodeFieldPressed,{origin:u,section:h})},value:m.code}),U().createElement(ir,{translate:t})),U().createElement(_e.Modal.Footer,null,U().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",disabled:S||6!==m.code.length,onClick:function(){f(Fr(Fr({},m),{},{isReadyToSubmitCode:!0}))}},t(T)),0===g?U().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button",onClick:function(){var t;ft(An.verifyPhoneResendPressed,{origin:u,section:h}),0===g&&(Bn(),0===g&&(t=setInterval(function(){E(function(e){return 1===e&&clearInterval(t),e-1})},1e3)),E(R))}},t(e)):U().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button btn-max-width resend-button-disabled"},t(r),U().createElement("span",null,P+g+x))))}zr.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired};var Kr=zr;function Xr(e){function t(){l||(ft(An.phoneNumberModalDismissed,{origin:o.origin,section:c}),r(o.isPhoneVerified),a({type:wt}))}var n=e.translate,r=e.onClose,i=e.origin,e=jn(),o=e.phoneUpsellState,a=e.dispatch,c=Vn(o.pageName),l=(!!j.DeviceMeta&&(0,j.DeviceMeta)()).isInApp;return(0,D.useEffect)(function(){o.origin!==Ke&&ft(An.phoneNumberModalShown,{origin:o.origin,section:c})},[o.pageName,o.origin]),(0,D.useEffect)(function(){a({type:It,origin:i})},[]),U().createElement(_e.Modal,{show:o.isOpen,onHide:t,className:l?"verification-modal phone-verification-webview":"verification-modal",size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},function(){switch(o.pageName){case Cn:return U().createElement(Pr,{translate:n,onHide:t});case xn:return U().createElement(Kr,{translate:n,onHide:t});case Nn:return U().createElement(Ar,{translate:n,onHide:t});case wn:return U().createElement(_r,{translate:n,onHide:t,origin:o.origin,shouldPrefillAffirmativeDiscoverabilityConsent:o.shouldPrefillAffirmativeDiscoverabilityConsent});default:return U().createElement(Pr,{translate:n,onHide:t})}}())}Xr.propTypes={translate:n().func.isRequired,onClose:n().func.isRequired,origin:n().string},Xr.defaultProps={origin:Xe};var Jr=Xr;function Qr(e){var t=e.translate,n=e.onClose,e=e.origin;return U().createElement(In,null,U().createElement(Jr,{translate:t,onClose:n,origin:e}))}Qr.propTypes={translate:n().func.isRequired,origin:n().string,onClose:n().func},Qr.defaultProps={origin:void 0,onClose:function(){return null}};var Zr=(0,o.withTranslations)(Qr,s),ei="CLOSE_CONTACT_METHOD_PROMPT_MODAL",ti="SET_LOGGING_VALUES";function ni(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ri(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ii(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function oi(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):ii(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function ai(e,t){switch(t.type){case ei:return oi(oi({},e),{},{isOpen:!1});case ti:return oi(oi({},e),{},{origin:t.origin,section:t.section});default:return li}}function ci(e){var t=e.children,e=(n=ni((0,D.useReducer)(ai,li),2))[0],n=n[1];return U().createElement(si.Provider,{value:{contactMethodPromptModalState:e,dispatch:n}},t)}var li={isOpen:!0,origin:"",section:""},si=(0,D.createContext)(li);ci.propTypes={children:n().node.isRequired};var z=dt.eventStreamService.eventTypes,Xe="contactMethodModal",ui={contactMethodPromptShown:{name:"contactMethodPromptShown",type:z.modalAction,context:Xe,params:{aType:"shown"}},contactMethodPromptDismissed:{name:"contactMethodPromptDismissed",type:z.modalAction,context:Xe,params:{aType:"dismissed"}},contactMethodPromptEmailClicked:{name:"contactMethodPromptEmailClicked",type:z.buttonClick,context:Xe,params:{btn:"email"}},contactMethodPromptPhoneClicked:{name:"contactMethodPromptPhoneClicked",type:z.buttonClick,context:Xe,params:{btn:"phone"}},contactMethodPromptSupportClicked:{name:"contactMethodPromptSupportClicked",type:z.buttonClick,context:Xe,params:{btn:"support"}},contactMethodPromptLogoutClicked:{name:"contactMethodPromptLogoutClicked",type:z.buttonClick,context:Xe,params:{btn:"logout"}}};function di(){return(0,D.useContext)(si)}function pi(e){function t(e){e||null!==j.UpsellService&&void 0!==j.UpsellService&&j.UpsellService.renderContactMethodPromptModal({origin:i.origin,section:i.section})}var n=e.translate,r=e.onHide,i=di().contactMethodPromptModalState,o=nn,a=rn,c=on,l=an,s=cn,u=ln,d=un,p=dn,e=sn;return U().createElement("div",null,U().createElement(_e.Modal.Header,{useBaseBootstrapComponent:!0},U().createElement("div",{className:"verification-upsell-title-container"},U().createElement(_e.Modal.Title,{id:"contained-modal-title-vcenter"},n(o)))),U().createElement(_e.Modal.Body,{className:"verification-grid"},U().createElement("span",{className:"icon-spot-passcode-xl verification-grid-icon"}),U().createElement("div",null,U().createElement("div",{className:"verification-upsell-title-container page-title "},U().createElement("div",{className:"font-header-2"},n(a))),U().createElement("div",{className:"text-description"},n(c))),U().createElement("span",{className:"icon-spot-success-xl verification-grid-icon"}),U().createElement("div",null,U().createElement("div",{className:"verification-upsell-title-container page-title"},U().createElement("div",{className:"font-header-2"},n(l))),U().createElement("div",{className:"text-description"},n(s)))),U().createElement(_e.Modal.Footer,null,U().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",onClick:function(){r(),ft(ui.contactMethodPromptPhoneClicked,{origin:i.origin,section:i.section}),null!==j.UpsellService&&void 0!==j.UpsellService&&j.UpsellService.renderPhoneUpsell({onClose:t})}},n(u)),U().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button",onClick:function(){r(),ft(ui.contactMethodPromptEmailClicked,{origin:i.origin,section:i.section}),null!==j.UpsellService&&void 0!==j.UpsellService&&j.UpsellService.renderEmailUpsell(t)}},n(e)),U().createElement("div",null,U().createElement("div",{className:"contact-method-prompt-links"},U().createElement(_e.Link,{className:"text-default contact-method-link-button",href:"https://en.help.roblox.com/hc/articles/203313350",target:"_blank",onClick:function(){ft(ui.contactMethodPromptSupportClicked,{origin:i.origin,section:i.section})}},n(p)),U().createElement("button",{type:"button",className:"text-default contact-method-link-button",onClick:function(){ft(ui.contactMethodPromptLogoutClicked,{origin:i.origin,section:i.section}),j.NavigationService.logoutAndRedirect()}},n(d))))))}pi.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired};var mi=pi;function fi(e){function t(){ft(ui.contactMethodPromptDismissed,{origin:o.origin,section:o.section}),a({type:ei})}var n=e.translate,r=e.origin,i=e.section,e=di(),o=e.contactMethodPromptModalState,a=e.dispatch;return(0,D.useEffect)(function(){a({type:ti,origin:r,section:i})},[]),(0,D.useEffect)(function(){o.origin&&o.section&&ft(ui.contactMethodPromptShown,{origin:o.origin,section:o.section})},[o.origin,o.section]),U().createElement(_e.Modal,{show:o.isOpen,onHide:t,keyboard:!1,className:"verification-modal",backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},U().createElement(mi,{translate:n,onHide:t}))}fi.propTypes={translate:n().func.isRequired,section:n().string.isRequired,origin:n().string.isRequired};var vi=fi;function yi(e){var t=e.translate,n=e.origin,e=e.section;return U().createElement(ci,null,U().createElement(vi,{translate:t,origin:n,section:e}))}yi.propTypes={translate:n().func.isRequired,origin:n().string.isRequired,section:n().string.isRequired};var hi=(0,o.withTranslations)(yi,s);e().UpsellService={renderEmailUpsell:function(t){(0,l.ready)(function(){var e=document.getElementById(a);e&&((0,i.unmountComponentAtNode)(e),(0,i.render)(U().createElement(Nt,null),e),tt(t))})},renderPhoneUpsell:function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.onClose,n=e.origin;(0,l.ready)(function(){var e=document.getElementById("phoneVerificationUpsell-container");e&&((0,i.unmountComponentAtNode)(e),(0,i.render)(U().createElement(Zr,{onClose:t,origin:n}),e))})},renderContactMethodPromptModal:function(e){var t=e.origin,n=e.section;(0,l.ready)(function(){var e=document.getElementById("contactMethodPrompt-container");e&&((0,i.unmountComponentAtNode)(e),(0,i.render)(U().createElement(hi,{origin:t,section:n}),e))})}},e().EmailVerificationService={handleUserEmailUpsellAtLogout:ot,handleUserEmailUpsellAtBuyRobux:function(e){return et({origin:N,skipCallback:e})},handleUserEmailUpsellOnHomePage:tt,handleUserEmailVerificationRequiredByPurchaseWarning:function(){return et({origin:O,requireVerification:!0})},handleUserEmailUpsellAtPremiumSubscription:function(e){return et({origin:A,skipCallback:e})}},(0,l.ready)(function(){document.getElementById(a)&&(0,i.render)(U().createElement(Nt,null),document.getElementById(a))})}();
//# sourceMappingURL=https://js.rbxcdn.com/05cf15264cd362eeebc94fab7c19e570-verificationUpsell.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("VerificationUpsell");